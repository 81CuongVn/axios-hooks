# axios-hooks

[![Build Status](https://travis-ci.org/simoneb/axios-hooks.svg?branch=master)](https://travis-ci.org/simoneb/axios-hooks)
![](https://img.shields.io/npm/v/axios-hooks.svg?style=flat)

React hooks for [axios], with built-in support for server side rendering.

## Features

- All the [axios] awesomeness you are familiar with
- Zero configuration, but configurable if needed
- One-line usage
- Super straightforward to use with SSR

## Installation

`npm install axios-hooks`

## Quick Start

```js
import useAxios from 'axios-hooks'

function App() {
  const [{ data, loading, error }, refetch] = useAxios(
    'https://jsonplaceholder.typicode.com/todos/1'
  )
  
  return (
    <div>
      <button onClick={refetch}>refetch</button>
      {loading && <p>Loading...</p>}
      {error && <p>Error!</p>}
      {data && <pre>{JSON.stringify(data, null, 2)}</pre>}
    </div>
  )
}
```

[![Edit axios-hooks Quick Start](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/2oxrlq8rjr)

> This example uses the awesome [JSONPlaceholder](https://jsonplaceholder.typicode.com/) API

## API

The package exports one default export and named exports:

`import useAxios, { configure, loadCache, serializeCache } from 'axios-hooks'`

### useAxios(url[, config])

The main React hook to execute HTTP requests.

- `url` `{String}` - The request URL
- `config` `{Object}` - The request [config](https://github.com/axios/axios#request-config)

Returns:

`[{ data, loading, error, response }, refetch]`

- `data` `{Object}` - The [success response](https://github.com/axios/axios#response-schema) data property (for convenient access)
- `loading` `{Boolean}` - True if the request is in progress, otherwise False
- `error` `{Object}` - The [error](https://github.com/axios/axios#handling-errors) value
- `response` `{Object}` - The whole [success response](https://github.com/axios/axios#response-schema) object (for accessing additional response information like headers, ...)

- `refetch` `{() => void}` - Function to reload the data

### configure({ cache, axios })

Allows to provide custom instances of cache and axios.

- `cache` `{LRU}` - An instance of a [lru-cache](https://github.com/isaacs/node-lru-cache)
- `axios` `{Axios}` - An instance of [axios](https://github.com/axios/axios#creating-an-instance)

### serializeCache()

Returns a dump of the cache to use in server side sendering scenarios.

Returns:

`{Array}` - A serializable representation of the request-response cache ready to be used by `loadCache`

### loadCache(cache)

Populates the cache with serialized data generated by `serializeCache`.

- `cache` `{Array}` - The serializable representation of the request-response cache generated by `serializeCache`

## Promises

axios-hooks depends on a native ES6 Promise implementation to be [supported](http://caniuse.com/promises). 
If your environment doesn't support ES6 Promises, you can [polyfill](https://github.com/jakearchibald/es6-promise).

## Credits

axios-hooks is heavily inspired by [graphql-hooks](https://github.com/nearform/graphql-hooks), 
developed by the awesome people at [NearForm](https://github.com/nearform).

## License

MIT

[axios]: https://github.com/axios/axios
